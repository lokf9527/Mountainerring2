import{_ as y,a as v,r as w,o as d,c as n,d as t,i as k,F as L,j as I,t as e,h as T,e as p,w as m,q as b,n as V,f}from"./index-2294061b.js";const{VITE_URL:g,VITE_PATH:x}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"ph",BASE_URL:"/Mountainerring2/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},E={data(){return{order:{products:[],user:{}},orderId:""}},components:{RouterLink:v},methods:{getOrder(){this.isLoading=!0,this.$http.get(`${g}/v2/api/${x}/order/${this.orderId}`).then(r=>{this.isLoading=!1;const{order:l}=r.data;this.order=l}).catch(r=>{alert(r.data.message),this.isLoading=!1})},payOrder(){this.isLoading=!0,this.$http.post(`${g}/v2/api/${x}/pay/${this.orderId}`).then(()=>{this.isLoading=!1,this.getOrder()}).catch(r=>{alert(r.data.message),this.isLoading=!1})}},mounted(){this.orderId=this.$route.params.orderId,this.getOrder()}},O={class:"container"},R={class:"my-5 mx-1 row justify-content-center w-100"},N={class:"col-md-6"},j={class:"card rounded-0 py-4 mb-3"},S=t("div",{class:"card-header border-bottom-0 bg-white px-4 py-0"},[t("h2",null,"訂單資訊")],-1),C={class:"card-body px-4 py-0"},$={class:"list-group list-group-flush"},B={class:"d-flex mt-2"},D={class:"w-100 d-flex flex-column"},P={class:"d-flex justify-content-between fw-bold"},U={class:"mb-0"},z={class:"d-flex justify-content-between mt-auto"},A={class:"text-muted mb-0"},M={class:"mb-0"},q={class:"list-group-item px-0 pb-0"},F=t("table",{class:"table text-muted"},[t("tbody",null,[t("tr",null,[t("th",{scope:"row",class:"border-0 px-0 pt-0 font-weight-normal"}," Payment "),t("td",{class:"text-end border-0 px-0 pt-0"},"信用卡")])])],-1),H={class:"d-flex justify-content-between mt-2"},G=t("p",{class:"mb-0 h4 fw-bold"},"總計",-1),J={class:"mb-0 h4 fw-bold"},K={class:"card rounded-0 py-4"},Q={class:"table"},W=t("th",{width:"100"},"Email",-1),X=t("th",null,"姓名",-1),Y=t("th",null,"收件人電話",-1),Z=t("th",null,"收件人地址",-1),tt=t("th",null,"付款狀態",-1),st={key:0,class:"d-flex mt-4 justify-content-between align-items-md-center align-items-end w-100"},et=t("button",{type:"submit",class:"btn btn-dark"},"確認付款",-1),ot={key:0,class:"text-end"};function rt(r,l,dt,nt,s,i){const a=w("RouterLink");return d(),n("div",O,[t("div",R,[t("div",N,[t("form",{onSubmit:l[0]||(l[0]=k((...o)=>i.payOrder&&i.payOrder(...o),["prevent"]))},[t("div",j,[S,t("div",C,[t("ul",$,[(d(!0),n(L,null,I(s.order.products,o=>{var c,u,_,h;return d(),n("li",{key:o.id,class:"list-group-item px-0"},[t("div",B,[t("div",{style:V([{width:"65px","max-height":"60px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${(c=o.product)==null?void 0:c.imageUrl})`}]),class:"rounded-0 me-3"},null,4),t("div",D,[t("div",P,[t("h5",null,e((u=o.product)==null?void 0:u.title),1),t("p",U,"x"+e(o.qty),1)]),t("div",z,[t("p",A,[t("small",null," NT$"+e((_=o.product)==null?void 0:_.price),1)]),t("p",M," NT$"+e((h=o.product)==null?void 0:h.price),1)])])])])}),128)),t("li",q,[F,t("div",H,[G,t("p",J," NT$"+e(s.order.total),1)])])])])]),t("div",K,[t("table",Q,[t("tbody",null,[t("tr",null,[W,t("td",null,e(s.order.user.email),1)]),t("tr",null,[X,t("td",null,e(s.order.user.name),1)]),t("tr",null,[Y,t("td",null,e(s.order.user.tel),1)]),t("tr",null,[Z,t("td",null,e(s.order.user.address),1)]),t("tr",null,[tt,t("td",null,[t("span",{class:T({"text-success":s.order.is_paid})},e(s.order.is_paid?"付款完成":"尚未付款"),3)])])])])]),s.order.is_paid===!1?(d(),n("div",st,[p(a,{to:"/",class:"btn btn-primary"},{default:m(()=>[f(" 回首頁 ")]),_:1}),et])):b("",!0)],32),s.order.is_paid?(d(),n("div",ot,[p(a,{to:"/",class:"btn btn-dark me-2 my-4"},{default:m(()=>[f(" 回首頁 ")]),_:1})])):b("",!0)])])])}const it=y(E,[["render",rt]]);export{it as default};
