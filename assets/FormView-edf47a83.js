import{_ as v,b as g,a as V,m as x,r as d,o as k,d as E,e,f as a,w as p,j as c,p as P,v as S,h as w}from"./index-51c262dd.js";import{c as y,l as R}from"./cartStore-f039657c.js";import{s as f}from"./sweetalert-608eb5cc.js";const{VITE_URL:T,VITE_PATH:U}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"ph",BASE_URL:"/Mountainerring2/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},C={data(){return{data:{user:{email:"",name:"",tel:"",address:""},message:""},isProcessing:!1}},methods:{createtOrder(){this.isProcessing=!0;const l=this.data;this.$http.post(`${T}/v2/api/${U}/order`,{data:l}).then(s=>{const{orderId:u,message:_}=s.data;this.isProcessing=!1,f.fire({title:`${_}`,icon:"success"}),this.getCart(),this.$router.push(`/checkout/${u}`)}).catch(()=>{f.fire({title:"無法新增訂單，請確認資料是否填寫完整",icon:"error"})})},isPhone(l){return/^(09)[0-9]{8}$/.test(l)?!0:"需要正確的電話號碼"},...g(y,["getCart"])},components:{RouterLink:V},computed:{...x(R,["loadingStatus"])}},L={class:"container"},I={class:"my-5 row justify-content-center"},N={class:"mb-3"},O=e("label",{for:"email",class:"form-label"},"Email",-1),A=e("span",{class:"text-danger"},"*",-1),B={class:"mb-3"},D=e("label",{for:"name",class:"form-label"},"收件人姓名",-1),q=e("span",{class:"text-danger"},"*",-1),M={class:"mb-3"},j=e("label",{for:"tel",class:"form-label"},"收件人電話",-1),H=e("span",{class:"text-danger"},"*",-1),z={class:"mb-3"},F=e("label",{for:"address",class:"form-label"},"收件人地址",-1),G=e("span",{class:"text-danger"},"*",-1),J={class:"mb-3"},K=e("label",{for:"message",class:"form-label"},"留言",-1),Q={class:"row"},W={class:"text-start col"},X={class:"text-end col"},Y=["disabled"];function Z(l,s,u,_,t,m){const r=d("v-field"),n=d("error-message"),h=d("RouterLink"),b=d("v-form");return k(),E("div",L,[e("div",I,[a(b,{class:"col-md-6",onSubmit:m.createtOrder},{default:p(({errors:i})=>[e("div",N,[O,A,a(r,{id:"email",name:"email",type:"email",class:c(["form-control",{"is-invalid":i.email}]),placeholder:"請輸入 Email",rules:"required|email",modelValue:t.data.user.email,"onUpdate:modelValue":s[0]||(s[0]=o=>t.data.user.email=o)},null,8,["class","modelValue"]),a(n,{name:"email",class:"invalid-feedback"})]),e("div",B,[D,q,a(r,{id:"name",name:"姓名",type:"text",class:c(["form-control",{"is-invalid":i.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:t.data.user.name,"onUpdate:modelValue":s[1]||(s[1]=o=>t.data.user.name=o)},null,8,["class","modelValue"]),a(n,{name:"姓名",class:"invalid-feedback"})]),e("div",M,[j,H,a(r,{id:"tel",name:"電話",type:"tel",class:c(["form-control",{"is-invalid":i.電話}]),placeholder:"請輸入電話",rules:m.isPhone,modelValue:t.data.user.tel,"onUpdate:modelValue":s[2]||(s[2]=o=>t.data.user.tel=o)},null,8,["class","rules","modelValue"]),a(n,{name:"電話",class:"invalid-feedback"})]),e("div",z,[F,G,a(r,{id:"address",name:"地址",type:"text",class:c(["form-control",{"is-invalid":i.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:t.data.user.address,"onUpdate:modelValue":s[3]||(s[3]=o=>t.data.user.address=o)},null,8,["class","modelValue"]),a(n,{name:"地址",class:"invalid-feedback"})]),e("div",J,[K,P(e("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":s[4]||(s[4]=o=>t.data.message=o)},null,512),[[S,t.data.message]])]),e("div",Q,[e("div",W,[a(h,{to:"/cart",class:"btn btn-danger"},{default:p(()=>[w("回購物車")]),_:1})]),e("div",X,[e("button",{type:"submit",class:"btn btn-primary",onClick:s[5]||(s[5]=()=>m.createtOrder()),disabled:t.isProcessing}," 送出訂單 ",8,Y)])])]),_:1},8,["onSubmit"])])])}const te=v(C,[["render",Z]]);export{te as default};
