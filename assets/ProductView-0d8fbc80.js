import{_ as w,b as k,a as x,m as L,r as b,o as u,d as p,f as _,e as t,w as g,t as d,p as P,v as C,i as T,F as m,l as V,h as v,k as y}from"./index-51c262dd.js";import{c as R,l as S}from"./cartStore-f039657c.js";import"./sweetalert-608eb5cc.js";const{VITE_URL:n,VITE_PATH:c}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"ph",BASE_URL:"/Mountainerring2/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},q={data(){return{product:{},relativeProduct:{},id:"",qty:1,isLoading:!1}},methods:{getProduct(){this.$http.get(`${n}/v2/api/${c}/product/${this.id}`).then(o=>{this.product=o.data.product,this.getRelativeProducts(),this.isLoading=!1})},getProducts(o,e=1){let r=`${n}v2/api/${c}/products/`;switch(o){case"初階體驗":case"中階探索":case"高階冒險":r=`${n}/v2/api/${c}/products?category=${o}`;break;default:r=`${n}/v2/api/${c}/products?page=${e}`}this.$http.get(r).then(l=>{this.products=l.data.products})},getRelativeProducts(){const{category:o,id:e}=this.product;this.$http.get(`${n}/v2/api/${c}/products?category=${o}`).then(r=>{this.relativeProduct=r.data.products.filter(l=>l.id!==e)})},addOne(){this.qty+=1},minusOne(){this.qty>1&&(this.qty-=1)},toggleId(o){this.$router.push(`/product/${o}`),this.id=o,this.getProduct(),this.isLoading=!0},...k(R,["addToCart"])},components:{RouterLink:x},computed:{...L(S,["loadingStatus"])},created(){const{id:o}=this.$route.params;this.id=o,this.getProduct()},mounted(){this.getProduct(),this.isLoading=!0}},E={class:"container w-100"},I={"aria-label":"breadcrumb"},U={class:"breadcrumb px-1 mb-0 py-3"},N={class:"breadcrumb-item"},O={class:"breadcrumb-item active","aria-current":"page"},D={class:"row align-items-center"},A={class:"col-md-7"},B={class:"carousel slide","data-ride":"carousel"},M={class:"carousel-inner"},$={class:"carousel-item active"},F=["src","alt"],H={class:"col-md-5"},j={class:"fw-bold h1 mb-1"},z={class:"h4 fw-bold text-end"},G={class:"input-group my-3 bg-light rounded"},J={class:"input-group-prepend"},K=["disabled"],Q=t("i",{class:"bi bi-dash-lg"},null,-1),W=[Q],X={class:"input-group-append"},Y=t("i",{class:"bi bi-plus-lg"},null,-1),Z=[Y],tt={class:"row align-items-center"},st={class:"col-6"},ot=["disabled"],et={key:0,class:"spinner-border spinner-border-sm me-3"},it=t("span",null,"加入購物車",-1),dt={class:"col-6"},rt={class:"row my-5"},nt={class:"col-md-7 text-wrapper"},ct=t("hr",null,null,-1),lt={class:"col-md-7"},at=t("h3",{class:"fw-bold"},"簡易行程",-1),ut={class:"text-wrapper"},pt=t("hr",null,null,-1),_t=t("h3",{class:"fw-bold"},"相關行程",-1),ht={class:"container"},bt={class:"row mt-4 mb-5"},gt={class:"card cardProducts border-0 mb-4 h-100",style:{"border-radius":"0%"}},mt=["src","alt","onClick"],vt=["onClick"],yt={class:"d-flex justify-content-between"},ft={class:"card-text mb-0 h6"};function wt(o,e,r,l,s,a){const f=b("VueLoading"),h=b("RouterLink");return u(),p(m,null,[_(f,{active:s.isLoading,"onUpdate:active":e[0]||(e[0]=i=>s.isLoading=i)},null,8,["active"]),t("div",E,[t("nav",I,[t("ol",U,[t("li",N,[_(h,{to:"/products",class:"text-muted"},{default:g(()=>[v("全部商品")]),_:1})]),t("li",O,d(s.product.title),1)])]),t("div",D,[t("div",A,[t("div",B,[t("div",M,[t("div",$,[t("img",{src:s.product.imageUrl,class:"d-block w-100",alt:s.product.title},null,8,F)])])])]),t("div",H,[t("h2",j,d(s.product.title),1),t("p",z,"NT$"+d(s.product.price),1),t("div",G,[t("div",J,[t("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon1",onClick:e[1]||(e[1]=()=>a.minusOne()),disabled:this.qty===1},W,8,K)]),P(t("input",{type:"text",class:"form-control border-0 text-center my-auto shadow-none bg-light",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1","onUpdate:modelValue":e[2]||(e[2]=i=>s.qty=i)},null,512),[[C,s.qty]]),t("div",X,[t("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon2",onClick:e[3]||(e[3]=()=>a.addOne())},Z)])]),t("div",tt,[t("div",st,[t("button",{type:"button",class:"text-nowrap btn btn-dark w-100 py-2",onClick:e[4]||(e[4]=()=>o.addToCart(s.product.id,s.qty)),disabled:o.loadingStatus===s.product.id},[o.loadingStatus===s.product.id?(u(),p("i",et)):T("",!0),it],8,ot)]),t("div",dt,[_(h,{to:"/cart",class:"text-nowrap btn btn-dark w-100 py-2",onClick:e[5]||(e[5]=()=>o.addToCart(s.product.id,s.qty))},{default:g(()=>[v("立刻購買")]),_:1})])])])]),t("div",rt,[t("div",nt,[t("p",null,d(s.product.description),1),ct]),t("div",lt,[at,t("p",ut,d(s.product.content),1)])]),pt,_t,t("div",ht,[t("div",bt,[(u(!0),p(m,null,V(s.relativeProduct,i=>(u(),p("div",{class:"col-lg-3 col-md-6",key:i.id},[t("div",gt,[t("img",{src:i.imageUrl,class:"card-img-top rounded-0",alt:i.title,style:{cursor:"pointer"},onClick:y(()=>a.toggleId(i.id),["prevent"])},null,8,mt),t("div",{class:"card-body text-start text-dark",style:{cursor:"pointer"},onClick:y(()=>a.toggleId(i.id),["prevent"])},[t("h5",null,d(i.title),1),t("div",yt,[t("p",ft," NT$"+d(i.price),1)])],8,vt)])]))),128))])])])],64)}const Pt=w(q,[["render",wt]]);export{Pt as default};
