import{q as h,s as c}from"./index-0dee44e8.js";import{S as p}from"./sweetalert2.all-1f1d155c.js";const r=p.mixin({toast:!0,showConfirmButton:!1,timer:1200,padding:"1em",position:"top"}),{VITE_URL:n,VITE_PATH:d}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"ph",BASE_URL:"/Mountainerring2/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},$=h("cart",{state:()=>({cart:{},total:0,final_total:0}),actions:{getCart(){c.get(`${n}/v2/api/${d}/cart`).then(t=>{this.cart=t.data.data.carts,this.total=t.data.data.total,this.final_total=t.data.data.final_total})},addToCart(t,o=1){const a={data:{product_id:t,qty:o}};c.post(`${n}/v2/api/${d}/cart`,a).then(e=>{const{message:s}=e.data;r.fire({title:`${s}`,icon:"success"}),this.getCart()}).catch(e=>{var i,l;const s=((l=(i=e.response)==null?void 0:i.data)==null?void 0:l.message)||"資料錯誤";r.fire({title:`${s}`,icon:"error"})})},updateCart(t,o){switch(o){case"reduce":t.qty>1&&(t.qty-=1);break;case"increase":t.qty+=1;break}const a={product_id:t.product.id,qty:t.qty};this.loadingItem=t.id,c.put(`${n}/v2/api/${d}/cart/${t.id}`,{data:a}).then(e=>{this.getCart(),this.loadingItem="";const{message:s}=e.data;r.fire({title:`${s}`,icon:"success"})}).catch(e=>{var i,l;const s=((l=(i=e.response)==null?void 0:i.data)==null?void 0:l.message)||"資料錯誤";r.fire({title:`${s}`,icon:"error"})})},deleteCart(t){this.loadingItem=t.id,c.delete(`${n}/v2/api/${d}/cart/${t.id}`).then(()=>{r.fire({title:"已刪除商品",icon:"success"}),console.log(this.loadingItem),this.getCart(),this.loadingItem=""}).catch(o=>{alert(o.data.message)})},deleteAllCart(){c.delete(`${n}/v2/api/${d}/carts`).then(()=>{r.fire({title:"已清空購物車",icon:"success"}),this.getCart()}).catch(t=>{var a,e;const o=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"資料錯誤";r.fire({title:`${o}`,icon:"error"})})},addCouponCode(t){const o={code:t};c.post(`${n}/v2/api/${d}/coupon`,{data:o}).then(a=>{const{message:e}=a.data;r.fire({title:`${e}`,icon:"success"}),this.getCart(),this.coupon_code=""}).catch(a=>{var s,i;const e=((i=(s=a.response)==null?void 0:s.data)==null?void 0:i.message)||"資料錯誤";r.fire({title:`${e}`,icon:"error"})})}},getters:{}});export{$ as c,r as s};
