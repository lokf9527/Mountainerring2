import{q as u,s as n}from"./index-46c9470e.js";import{s as r}from"./sweetalert-5f610025.js";const p=u("loadingStore",{state:()=>({isLoading:!1,loadingStatus:""})}),{VITE_URL:d,VITE_PATH:l}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"ph",BASE_URL:"/Mountainerring2/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},o=p(),f=u("cartSrore",{state:()=>({cart:{},total:0,final_total:0,code:""}),actions:{getCart(){o.isLoading=!0,n.get(`${d}/v2/api/${l}/cart`).then(t=>{this.cart=t.data.data.carts,this.total=t.data.data.total,this.final_total=t.data.data.final_total,o.isLoading=!1})},addToCart(t,i=1){const s={data:{product_id:t,qty:i}};o.loadingStatus=t,n.post(`${d}/v2/api/${l}/cart`,s).then(a=>{o.loadingStatus="";const{message:e}=a.data;r.fire({title:`${e}`,icon:"success"}),this.getCart()}).catch(a=>{var c,g;const e=((g=(c=a.response)==null?void 0:c.data)==null?void 0:g.message)||"資料錯誤";r.fire({title:`${e}`,icon:"error"})})},updateCart(t,i){switch(i){case"reduce":t.qty>1&&(t.qty-=1);break;case"increase":t.qty+=1;break}const s={product_id:t.product.id,qty:t.qty};o.loadingStatus=t.id,n.put(`${d}/v2/api/${l}/cart/${t.id}`,{data:s}).then(a=>{this.getCart(),o.loadingStatus="";const{message:e}=a.data;r.fire({title:`${e}`,icon:"success"})}).catch(a=>{var c,g;const e=((g=(c=a.response)==null?void 0:c.data)==null?void 0:g.message)||"資料錯誤";r.fire({title:`${e}`,icon:"error"})})},deleteCart(t){o.loadingStatus=t.id,n.delete(`${d}/v2/api/${l}/cart/${t.id}`).then(()=>{o.loadingStatus="",r.fire({title:"已刪除商品",icon:"success"}),this.getCart()}).catch(i=>{var a,e;const s=((e=(a=i.response)==null?void 0:a.data)==null?void 0:e.message)||"資料錯誤";r.fire({title:`${s}`,icon:"error"})})},deleteAllCart(){n.delete(`${d}/v2/api/${l}/carts`).then(()=>{o.loadingStatus="",r.fire({title:"已清空購物車",icon:"success"}),this.getCart()}).catch(t=>{var s,a;const i=((a=(s=t.response)==null?void 0:s.data)==null?void 0:a.message)||"資料錯誤";r.fire({title:`${i}`,icon:"error"})})},addCouponCode(t){const i={code:t};o.loadingStatus=t,n.post(`${d}/v2/api/${l}/coupon`,{data:i}).then(s=>{const{message:a}=s.data;r.fire({title:`${a}`,icon:"success"}),this.code="",this.getCart(),o.loadingStatus=""}).catch(s=>{var e,c;const a=((c=(e=s.response)==null?void 0:e.data)==null?void 0:c.message)||"資料錯誤";r.fire({title:`${a}`,icon:"error"})})}},getters:{}});export{f as c,p as l};
