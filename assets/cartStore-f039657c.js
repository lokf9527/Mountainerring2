import{s as u,u as n}from"./index-51c262dd.js";import{s as r}from"./sweetalert-608eb5cc.js";const p=u("loadingStore",{state:()=>({isLoading:!1,loadingStatus:""})}),{VITE_URL:d,VITE_PATH:l}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"ph",BASE_URL:"/Mountainerring2/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},i=p(),f=u("cartSrore",{state:()=>({cart:{},total:0,final_total:0,code:""}),actions:{getCart(){i.isLoading=!0,n.get(`${d}/v2/api/${l}/cart`).then(t=>{this.cart=t.data.data.carts,this.total=t.data.data.total,this.final_total=t.data.data.final_total,i.isLoading=!1}).catch(t=>{var e,a;const o=((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.message)||"取得購物車資料失敗，請稍後再試";r.fire({title:`${o}`,icon:"error"})})},addToCart(t,o=1){const e={data:{product_id:t,qty:o}};i.loadingStatus=t,n.post(`${d}/v2/api/${l}/cart`,e).then(a=>{i.loadingStatus="";const{message:s}=a.data;r.fire({title:`${s}`,icon:"success"}),this.getCart()}).catch(a=>{var c,g;const s=((g=(c=a.response)==null?void 0:c.data)==null?void 0:g.message)||"新增商品至購物車失敗，請稍後再試";r.fire({title:`${s}`,icon:"error"})})},updateCart(t,o){switch(o){case"reduce":t.qty>1&&(t.qty-=1);break;case"increase":t.qty+=1;break}const e={product_id:t.product.id,qty:t.qty};i.loadingStatus=t.id,n.put(`${d}/v2/api/${l}/cart/${t.id}`,{data:e}).then(a=>{this.getCart(),i.loadingStatus="";const{message:s}=a.data;r.fire({title:`${s}`,icon:"success"})}).catch(a=>{var c,g;const s=((g=(c=a.response)==null?void 0:c.data)==null?void 0:g.message)||"修改商品數量失敗，請稍後再試";r.fire({title:`${s}`,icon:"error"})})},deleteCart(t){i.loadingStatus=t.id,n.delete(`${d}/v2/api/${l}/cart/${t.id}`).then(()=>{i.loadingStatus="",r.fire({title:"已刪除商品",icon:"success"}),this.getCart()}).catch(o=>{var a,s;const e=((s=(a=o.response)==null?void 0:a.data)==null?void 0:s.message)||"刪除商品失敗，請稍後再試";r.fire({title:`${e}`,icon:"error"})})},deleteAllCart(){n.delete(`${d}/v2/api/${l}/carts`).then(()=>{i.loadingStatus="",r.fire({title:"已清空購物車",icon:"success"}),this.getCart()}).catch(t=>{var e,a;const o=((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.message)||"刪除商品失敗，請稍後再試";r.fire({title:`${o}`,icon:"error"})})},addCouponCode(t){const o={code:t};i.loadingStatus=t,n.post(`${d}/v2/api/${l}/coupon`,{data:o}).then(e=>{const{message:a}=e.data;r.fire({title:`${a}`,icon:"success"}),this.code="",this.getCart(),i.loadingStatus=""}).catch(e=>{var s,c;const a=((c=(s=e.response)==null?void 0:s.data)==null?void 0:c.message)||"優惠碼使用失敗，請稍後再試";r.fire({title:`${a}`,icon:"error"})})}},getters:{}});export{f as c,p as l};
