import{q as p,s as c}from"./index-1db2262d.js";import{S as u}from"./sweetalert2.all-82ac8f21.js";const o=u.mixin({toast:!0,showConfirmButton:!1,timer:1200,padding:"1em",position:"top"}),h=p("loadingStore",{state:()=>({loadingStatus:"",isProcessing:!1,isLoading:!1})}),n=h(),{VITE_URL:d,VITE_PATH:l}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"ph",BASE_URL:"/Mountainerring2/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},S=p("cartSrore",{state:()=>({cart:{},total:0,final_total:0}),actions:{getCart(){c.get(`${d}/v2/api/${l}/cart`).then(t=>{this.cart=t.data.data.carts,this.total=t.data.data.total,this.final_total=t.data.data.final_total})},addToCart(t,r=1){const s={data:{product_id:t,qty:r}};n.loadingStatus=t,c.post(`${d}/v2/api/${l}/cart`,s).then(a=>{n.loadingStatus="";const{message:e}=a.data;o.fire({title:`${e}`,icon:"success"}),this.getCart()}).catch(a=>{var i,g;const e=((g=(i=a.response)==null?void 0:i.data)==null?void 0:g.message)||"資料錯誤";o.fire({title:`${e}`,icon:"error"})})},updateCart(t,r){switch(r){case"reduce":t.qty>1&&(t.qty-=1);break;case"increase":t.qty+=1;break}const s={product_id:t.product.id,qty:t.qty};n.loadingStatus=t.id,c.put(`${d}/v2/api/${l}/cart/${t.id}`,{data:s}).then(a=>{this.getCart(),n.loadingStatus="";const{message:e}=a.data;o.fire({title:`${e}`,icon:"success"})}).catch(a=>{var i,g;const e=((g=(i=a.response)==null?void 0:i.data)==null?void 0:g.message)||"資料錯誤";o.fire({title:`${e}`,icon:"error"})})},deleteCart(t){n.loadingStatus=t.id,c.delete(`${d}/v2/api/${l}/cart/${t.id}`).then(()=>{n.loadingStatus="",o.fire({title:"已刪除商品",icon:"success"}),this.getCart()}).catch(r=>{var a,e;const s=((e=(a=r.response)==null?void 0:a.data)==null?void 0:e.message)||"資料錯誤";o.fire({title:`${s}`,icon:"error"})})},deleteAllCart(){c.delete(`${d}/v2/api/${l}/carts`).then(()=>{o.fire({title:"已清空購物車",icon:"success"}),this.getCart()}).catch(t=>{var s,a;const r=((a=(s=t.response)==null?void 0:s.data)==null?void 0:a.message)||"資料錯誤";o.fire({title:`${r}`,icon:"error"})})},addCouponCode(t){const r={code:t};c.post(`${d}/v2/api/${l}/coupon`,{data:r}).then(s=>{const{message:a}=s.data;o.fire({title:`${a}`,icon:"success"}),this.getCart(),this.coupon_code=""}).catch(s=>{var e,i;const a=((i=(e=s.response)==null?void 0:e.data)==null?void 0:i.message)||"資料錯誤";o.fire({title:`${a}`,icon:"error"})})}},getters:{}});export{S as c,h as l,o as s};
