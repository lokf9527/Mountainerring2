import{i as L}from"./banner-383f913b.js";import{_ as x,o as d,d as l,e as t,j as m,k as g,F as b,l as $,t as h,b as C,a as E,m as R,r as f,f as _,w as y,n as V,h as T}from"./index-fcb12152.js";import{f as k}from"./favoriteStore-946963b3.js";import{s as P}from"./sweetalert-305469f3.js";const U={props:["pages"],methods:{updatePage(n){this.$emit("emitPages",n)}}},I={"aria-label":"Page navigation example"},N={class:"pagination justify-content-center"},S=t("span",{"aria-hidden":"true"},"«",-1),M=[S],j={key:0,class:"page-link"},A=["onClick"],F=t("span",{"aria-hidden":"true"},"»",-1),O=[F];function B(n,e,s,c,i,o){return d(),l("nav",I,[t("ul",N,[t("li",{class:m([{disabled:!s.pages.has_pre},"page-item"])},[t("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=g(a=>o.updatePage(s.pages.current_page-1),["prevent"]))},M)],2),(d(!0),l(b,null,$(s.pages.total_pages,a=>(d(),l("li",{class:m(["page-item",{active:s.pages.current_page===a}]),key:a},[a===s.pages.current_page?(d(),l("span",j,h(a),1)):(d(),l("a",{key:1,class:"page-link",href:"#",onClick:g(v=>o.updatePage(a),["prevent"])},h(a),9,A))],2))),128)),t("li",{class:m(["page-item",{disabled:!s.pages.has_next}])},[t("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=g(a=>o.updatePage(s.pages.current_page+1),["prevent"]))},O)],2)])])}const D=x(U,[["render",B]]),{VITE_URL:p,VITE_PATH:u}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"ph",BASE_URL:"/Mountainerring2/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},z=k(),H={data(){return{imageUrl:L,products:[],pagination:{},currentPage:1,isLoading:!1}},methods:{getProducts(n,e=1){let s=`${p}v2/api/${u}/products/`;switch(n){case"初階體驗":case"中階探索":case"高階冒險":s=`${p}/v2/api/${u}/products?category=${n}`;break;default:s=`${p}/v2/api/${u}/products?page=${e}`}this.$http.get(s).then(c=>{this.products=c.data.products,z.tempProducts(this.products),this.pagination=c.data.pagination,this.isLoading=!1}).catch(c=>{var o,a;const i=((a=(o=c.response)==null?void 0:o.data)==null?void 0:a.message)||"取得產品列表失敗，請稍後再試";P.fire({title:`${i}`,icon:"error"})})},updatePage(n=1){let e=`${p}/v2/api/${u}/products?page=${n}`;this.$http.get(e).then(s=>{this.products=s.data.products,this.pagination=s.data.pagination}).catch(s=>{var i,o;const c=((o=(i=s.response)==null?void 0:i.data)==null?void 0:o.message)||"取得分頁失敗，請稍後再試";P.fire({title:`${c}`,icon:"error"})})},...C(k,["getFollows","toggleFollow"])},components:{RouterLink:E,Pagination:D},computed:{...R(k,["followIds"])},mounted(){this.getProducts(),this.isLoading=!0}},G={class:"container d-flex justify-content-end align-items-center h-75 w-50"},q={class:"me-4"},J=t("h3",{class:"text-dark",style:{"font-family":"Righteous"}},"MOUNTAINERRING",-1),K=t("h1",{class:"fw-bold text-dark mb-3"},"和你一起翻山越嶺",-1),Q={class:"container mt-md-5 mt-3 mb-7"},W={class:"row"},X={class:"col-md-3"},Y={class:"mb-3"},Z={class:"card border-0"},tt={class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0"},et={class:"d-flex justify-content-between align-items-center pe-1"},st=t("a",{href:"#",class:"text-dark"},"全部商品",-1),ot=[st],at={"aria-labelledby":"headingOne",style:{cursor:"pointer","border-radius":"0%"}},it={class:"card-body py-0"},nt={class:"list-unstyled"},rt=t("a",{href:"#",class:"text-dark"},"初階體驗",-1),dt=[rt],lt=t("a",{href:"#",class:"text-dark"},"中階探索",-1),ct=[lt],_t=t("a",{href:"#",class:"text-dark"},"高階冒險",-1),pt=[_t],ut={class:"col-md-9"},gt={class:"row"},ht=["src","alt"],mt={class:"card-body text-start text-dark"},ft=["onClick"],bt={key:0,class:"bi bi-heart text-danger h5 position-absolute"},kt={key:1,class:"bi bi-heart-fill text-danger h5 position-absolute"},vt={class:"mt-3 h5"},yt={class:"text-dark"};function Pt(n,e,s,c,i,o){const a=f("RouterLink"),v=f("VueLoading"),w=f("Pagination");return d(),l(b,null,[t("header",{class:"products-header",style:V({"background-image":`url(${i.imageUrl})`})},[t("div",G,[t("div",q,[J,K,_(a,{to:"/products",class:"btn btn-dark py-2"},{default:y(()=>[T("查看行程")]),_:1})])])],4),t("div",Q,[_(v,{active:i.isLoading,"onUpdate:active":e[0]||(e[0]=r=>i.isLoading=r)},null,8,["active"]),t("div",W,[t("div",X,[t("div",Y,[t("div",Z,[t("div",tt,[t("div",et,[t("h4",{class:"mb-0 ms-6",style:{cursor:"pointer"},onClick:e[1]||(e[1]=()=>o.getProducts(""))},ot)])]),t("div",at,[t("div",it,[t("ul",nt,[t("li",{class:"py-2 d-block",onClick:e[2]||(e[2]=()=>o.getProducts("初階體驗"))},dt),t("li",{class:"py-2 d-block",onClick:e[3]||(e[3]=()=>o.getProducts("中階探索"))},ct),t("li",{class:"py-2 d-block",onClick:e[4]||(e[4]=()=>o.getProducts("高階冒險"))},pt)])])])])])]),t("div",ut,[t("div",gt,[(d(!0),l(b,null,$(i.products,r=>(d(),l("div",{class:"col-md-4",key:r.id},[_(a,{to:`/product/${r.id}`,class:"card cardProducts border-0 rounded-0 mb-4 position-relative"},{default:y(()=>[t("img",{src:r.imageUrl,class:"card-img-top rounded-0 object-fit-cover",alt:r.title},null,8,ht),t("div",mt,[t("div",{class:"position-absolute",style:{right:"30px",top:"10px"},onClick:g(()=>n.toggleFollow(r.id),["prevent"])},[n.followIds.indexOf(r.id)===-1?(d(),l("i",bt)):(d(),l("i",kt))],8,ft),t("h4",vt,[t("p",yt,h(r.title),1)]),t("p",null,"NT$"+h(r.price),1)])]),_:2},1032,["to"])]))),128))]),_(w,{pages:i.pagination,onEmitPages:o.updatePage},null,8,["pages","onEmitPages"])])])])],64)}const Ct=x(H,[["render",Pt]]);export{Ct as default};
